<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CountMate AI - 人間とAIのコンビネーションで課題を解決</title>
    <!-- Tailwind CSSの読み込み -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts (Noto Sans JP) の読み込み -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- Ionicons (アイコン用) -->
    <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>
    <style>
        body {
            font-family: 'Noto Sans JP', sans-serif;
            background-color: #F9F7F3; /* 全体の背景色 */
            color: #333;
        }
        /* 見出しのスタイル */
        .section-heading {
            font-size: 2.5rem; /* 40px */
            font-weight: 700;
            text-align: center;
            margin-bottom: 4rem; /* 64px */
            line-height: 1.5;
            color: #1F2937;
        }
        /* 情報ボックスのスタイル */
        .info-box {
            background-color: #E6F4F1; /* 薄いミントグリーン */
            border-radius: 8px;
            padding: 1.5rem;
            display: flex;
            align-items: center;
            gap: 1rem;
            color: #047857; /* 濃いグリーン */
        }
        /* 赤色のテキストハイライト */
        .text-highlight {
            color: #EF4444; /* 赤色 */
            font-weight: 700;
        }
        /* タイムラインの線 */
        .timeline-line {
            position: absolute;
            left: 20px;
            top: 20px;
            bottom: -20px;
            width: 2px;
            background-color: #D1D5DB; /* gray-300 */
        }
        /* スムーズスクロール */
        html {
            scroll-behavior: smooth;
        }
         /* Chatbot Styles */
        #chat-container {
            transition: opacity 0.3s ease-in-out, transform 0.3s ease-in-out;
        }
        .chat-bubble-user {
            background-color: #166534; /* dark-green */
            color: white;
        }
        .chat-bubble-ai {
            background-color: #E5E7EB; /* gray-200 */
            color: #1F2937; /* gray-800 */
        }
        .typing-indicator span {
            display: inline-block;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background-color: #6B7280;
            animation: bounce 1s infinite;
        }
        .typing-indicator span:nth-child(2) {
            animation-delay: 0.1s;
        }
        .typing-indicator span:nth-child(3) {
            animation-delay: 0.2s;
        }
        @keyframes bounce {
            0%, 60%, 100% { transform: translateY(0); }
            30% { transform: translateY(-6px); }
        }
        .youtube-play-button {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: rgba(0, 0, 0, 0.6);
            border-radius: 50%;
            padding: 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }
        .youtube-container:hover .youtube-play-button {
            background-color: rgba(255, 0, 0, 0.8);
            transform: translate(-50%, -50%) scale(1.1);
        }
        /* Aspect Ratio Plugin for Tailwind */
        .aspect-w-4 { position: relative; padding-bottom: 75%; }
        .aspect-h-3 { /* No style needed here if w-4 is used */ }
        .aspect-w-16 { position: relative; padding-bottom: 56.25%; }
        .aspect-h-9 { /* No style needed here if w-16 is used */ }
        .aspect-w-4 > *, .aspect-w-16 > * { position: absolute; height: 100%; width: 100%; top: 0; right: 0; bottom: 0; left: 0; }
    </style>
</head>
<body class="antialiased">

    <!-- ナビゲーションバー -->
    <header class="bg-white/80 backdrop-blur-md sticky top-0 z-50 shadow-sm">
        <div class="container mx-auto px-6 py-4 flex justify-between items-center">
            <a href="#" class="text-2xl font-bold text-gray-800">CountMate AI</a>
            <nav class="hidden md:flex items-center space-x-6 text-sm">
                <a href="#features" class="text-gray-600 hover:text-green-800">特徴</a>
                <a href="#use-cases" class="text-gray-600 hover:text-green-800">活用シーン</a>
                <a href="#effects" class="text-gray-600 hover:text-green-800">導入効果</a>
                <a href="#how-to-use" class="text-gray-600 hover:text-green-800">操作方法</a>
                <a href="#pricing" class="text-gray-600 hover:text-green-800">費用</a>
                <a href="#contact" class="bg-green-800 text-white px-5 py-2 rounded-md hover:bg-green-900 transition">お問い合わせ</a>
            </nav>
            <button class="md:hidden">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
            </button>
        </div>
    </header>

    <main>
        <!-- 1. ヒーローセクション -->
        <section class="relative h-[80vh] flex items-center justify-center text-center text-white overflow-hidden">
            <!-- 背景画像 -->
            <div class="absolute inset-0 bg-cover bg-center" style="background-image: url('https://i.imgur.com/nh0FpxJ.jpeg');"></div>
            <!-- 背景オーバーレイ -->
            <div class="absolute inset-0 bg-black opacity-50"></div>
            <!-- コンテンツ -->
            <div class="relative z-10 p-8">
                <h1 class="text-4xl md:text-6xl font-extrabold leading-tight">
                    答えは、<span class="text-blue-300">人間とAI</span>の<br>コンビネーションにありました。
                </h1>
                <h2 class="mt-4 text-3xl md:text-5xl font-bold text-gray-100">CountMate AI登場</h2>
                <p class="mt-6 max-w-xl mx-auto text-gray-200">
                    CountMate AIは、スマートフォンのカメラをかざすだけで、瞬時かつ正確にあらゆる対象物をカウントします。
                </p>
                <div class="mt-8 flex justify-center gap-4">
                    <a href="#contact" class="bg-green-700 text-white font-bold py-3 px-8 rounded-md hover:bg-green-800 transition-colors shadow-lg">
                        こちらをクリック
                    </a>
                    <a href="#features" class="bg-white text-green-700 border border-transparent font-bold py-3 px-8 rounded-md hover:bg-green-50 transition-colors shadow-lg">
                        詳細はこちら
                    </a>
                </div>
            </div>
        </section>

        <!-- 2. 課題提起セクション -->
        <section class="py-24">
            <div class="container mx-auto px-6">
                <h2 class="section-heading">そのカウント作業、まだ続けますか？</h2>
                <p class="text-center max-w-3xl mx-auto mb-16 text-gray-600">
                    鉄鋼業界向けに業務効率化と課題解決に貢献する革新的なCountMate AIについてご提案させていただきます。私たちの製品が少しでも貴社の業務にお役に立てれば幸いです。
                </p>
                <div class="grid md:grid-cols-3 gap-8 max-w-5xl mx-auto">
                    <div class="bg-white p-8 rounded-lg shadow-md text-center">
                        <ion-icon name="hourglass-outline" class="text-5xl text-green-700 mx-auto mb-4"></ion-icon>
                        <h3 class="text-xl font-bold mb-3">時間がかかりすぎる</h3>
                        <p class="text-gray-600">目視でのカウントや手入力に膨大な時間がかかり、本来の業務を圧迫している。</p>
                    </div>
                    <div class="bg-white p-8 rounded-lg shadow-md text-center">
                        <ion-icon name="alert-circle-outline" class="text-5xl text-green-700 mx-auto mb-4"></ion-icon>
                        <h3 class="text-xl font-bold mb-3">数え間違いが多い</h3>
                        <p class="text-gray-600">ヒューマンエラーによる数え間違いで、在庫数が合わず再確認の手間が発生する。</p>
                    </div>
                    <div class="bg-white p-8 rounded-lg shadow-md text-center">
                        <ion-icon name="body-outline" class="text-5xl text-green-700 mx-auto mb-4"></ion-icon>
                        <h3 class="text-xl font-bold mb-3">作業者の負担が大きい</h3>
                        <p class="text-gray-600">倉庫内の暑さ寒さの中での作業は、作業者の負担が大きく、カウント作業は敬遠されがちです。</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- 3. CountMate AIとは -->
        <section class="py-24 bg-white">
            <div class="container mx-auto px-6 flex flex-col md:flex-row items-center gap-12">
                <div class="md:w-1/2">
                    <h2 class="text-4xl font-bold mb-6">CountMate AIとは</h2>
                    <ul class="list-disc list-inside space-y-3 text-gray-700 leading-relaxed">
                        <li>CountMate AIは、円形パイプの数をAIが自動的にカウントするWEBアプリケーションです。</li>
                        <li>従来は人手に頼っていたパイプのカウント作業をAIで自動化することで、正確性と作業効率を大幅に向上させます。</li>
                    </ul>
                </div>
                <div class="md:w-1/2">
                    <img src="https://i.imgur.com/14E5uiq.jpeg" alt="CountMate AIの紹介画像" class="rounded-lg shadow-xl w-full">
                </div>
            </div>
        </section>

        <!-- 4. 活用シーン -->
        <section id="use-cases" class="py-24">
            <div class="container mx-auto px-6">
                <h2 class="section-heading">活用シーン</h2>
                <div class="grid md:grid-cols-2 gap-12">
                    <div>
                        <img src="https://i.imgur.com/V3JXbQf.jpeg" alt="倉庫での棚卸し作業の様子" class="rounded-lg shadow-lg mb-6 w-full">
                        <h3 class="text-2xl font-bold mb-3">棚卸し作業の効率化</h3>
                        <p class="text-gray-600">CountMate AIを使用することで、棚卸し作業に必要な人員と時間を大幅に削減できます。精度の高いカウントにより、在庫管理の正確性も向上します。</p>
                    </div>
                    <div>
                        <img src="https://i.imgur.com/j4FnRqF.png" alt="トラックに積まれた大量のパイプ" class="rounded-lg shadow-lg mb-6 w-full">
                        <h3 class="text-2xl font-bold mb-3">商品出荷・入庫の正確化</h3>
                        <p class="text-gray-600">出荷時や受入時のパイプ数を正確にカウントすることで、ミスを防ぎ、取引の信頼性を高めます。迅速な処理により、業務効率も大幅に向上します。</p>
                    </div>
                </div>
                <div class="info-box mt-16 max-w-4xl mx-auto">
                    <ion-icon name="checkmark-circle" class="text-2xl flex-shrink-0"></ion-icon>
                    <p>CountMate AIは、パイプのカウント作業に革命をもたらす画期的なアプリです。棚卸しや在庫管理、商品の出荷・受入など、様々な場面で活躍し、業務プロセスを大幅に改善します。ぜひ一度、CountMate AIをお試しください。</p>
                </div>
            </div>
        </section>
        
        <!-- 5. 効率化 -->
        <section class="py-24 bg-white">
            <div class="container mx-auto px-6 text-center">
                <h2 class="section-heading">出荷・受入・棚卸しを劇的に効率化！</h2>
                <p class="max-w-2xl mx-auto mb-12 text-gray-600">様々な業界のカウント作業を革新的に改善する、画期的なソリューションです。</p>
                <div class="flex flex-col md:flex-row items-center justify-center gap-8 md:gap-16">
                    <div class="w-full md:w-2/5">
                        <h3 class="text-3xl font-bold mb-4">手作業</h3>
                        <img src="https://i.imgur.com/n3GrAMv.jpeg" alt="手作業でパイプを数える作業員" class="rounded-lg shadow-lg w-full">
                    </div>
                    <div class="text-4xl font-bold text-gray-400">VS</div>
                    <div class="w-full md:w-2/5">
                        <h3 class="text-3xl font-bold mb-4">AI</h3>
                        <img src="https://i.imgur.com/7poE4pe.jpeg" alt="笑顔でアプリを使う作業員" class="rounded-lg shadow-lg w-full">
                    </div>
                </div>
                <div class="max-w-4xl mx-auto mt-12 text-left leading-relaxed">
                    <p>従来、手間と時間がかかっていたパイプのカウント作業を、AIを活用することで大幅に効率化できるようになりました。CountMate AIの導入により、<span class="text-highlight">作業時間は約80%削減され</span>、人為的なミスや作業者の負担を大幅に軽減することが可能です。</p>
                    <p class="mt-4">AIは、貴社の倉庫環境に合わせた画像認識モデルを形成し、継続的な精度を向上に努めます。また、リアルタイムで正確な在庫情報を把握する為に、在庫管理システムとの連携も可能です。AIと人間の協働により、<span class="text-highlight">出荷、入荷、棚卸し</span>といったカウント業務のさらなる効率化と高度化が期待できます。</p>
                </div>
                <div class="info-box mt-12 max-w-4xl mx-auto text-left">
                     <ion-icon name="checkmark-circle" class="text-2xl flex-shrink-0"></ion-icon>
                    <p>導入企業様からは、作業効率の向上だけでなく、従業員の労働環境改善にも大きく貢献したとの声を多数いただいています。</p>
                </div>
            </div>
        </section>

        <!-- 6. 誕生秘話 -->
        <section class="py-24">
             <div class="container mx-auto px-6">
                <h2 class="section-heading">CountMate AIが生まれた歴史</h2>
                <div class="max-w-3xl mx-auto">
                    <!-- Step 1 -->
                    <div class="flex gap-8 relative mb-16">
                        <div class="relative">
                            <div class="timeline-line"></div>
                            <div class="bg-green-700 text-white w-10 h-10 flex items-center justify-center rounded-full font-bold z-10 relative">1</div>
                        </div>
                        <div class="flex-1">
                            <img src="https://i.imgur.com/qVEBoMq.jpeg" class="rounded-lg shadow-md mb-4 w-full">
                            <h3 class="text-xl font-bold mb-2">パイプを手で数えた</h3>
                            <p class="text-sm text-gray-600">従来、パイプの本数を数える作業は、パイプ屋が手作業で数えるという方法がとられていました。この作業は非常に手間と時間がかかり、人為的なミスが発生しやすいという課題がありました。特に、100本を超えるような大量のパイプを数える場合は、非常に困難な作業でした。</p>
                        </div>
                    </div>
                    <!-- Step 2 -->
                    <div class="flex gap-8 relative mb-16">
                         <div class="relative">
                            <div class="timeline-line"></div>
                            <div class="bg-green-700 text-white w-10 h-10 flex items-center justify-center rounded-full font-bold z-10 relative">2</div>
                        </div>
                        <div class="flex-1">
                            <img src="https://i.imgur.com/RwF3CFN.jpeg" class="rounded-lg shadow-md mb-4 w-full">
                            <h3 class="text-xl font-bold mb-2">パイプを写真に撮影してから数えた</h3>
                            <p class="text-sm text-gray-600">パイプを写真に撮影してから、写真で数える方法に切り替えました。写真で数えることで、手作業で数えるよりも効率的に数えることができるようになりました。</p>
                        </div>
                    </div>
                    <!-- Step 3 -->
                    <div class="flex gap-8 relative mb-16">
                        <div class="relative">
                            <div class="timeline-line"></div>
                            <div class="bg-green-700 text-white w-10 h-10 flex items-center justify-center rounded-full font-bold z-10 relative">3</div>
                        </div>
                        <div class="flex-1">
                            <img src="https://i.imgur.com/45LKKof.jpeg" class="rounded-lg shadow-md mb-4 w-full">
                            <h3 class="text-xl font-bold mb-2">画像認識エンジンでパイプを数えた</h3>
                            <p class="text-sm text-gray-600">画像認識技術を利用して、パイプの本数を自動で数えるシステムを開発しました。このシステムは、スマートフォンのカメラで撮影した写真から、パイプの本数を自動で認識して数えることができます。</p>
                        </div>
                    </div>
                    <!-- Step 4 -->
                    <div class="flex gap-8 relative mb-16">
                        <div class="relative">
                            <div class="timeline-line"></div>
                            <div class="bg-green-700 text-white w-10 h-10 flex items-center justify-center rounded-full font-bold z-10 relative">4</div>
                        </div>
                         <div class="flex-1">
                            <img src="https://i.imgur.com/4khKkDQ.jpeg" class="rounded-lg shadow-md mb-4 w-1/2 mx-auto">
                            <h3 class="text-xl font-bold mb-2">AIにパイプを数えさせた</h3>
                            <p class="text-sm text-gray-600">AIにパイプを数えさせることで、パイプの本数を数える作業を完全に自動化することに成功しました。これにより、作業効率を大幅に向上させることができました。</p>
                        </div>
                    </div>
                     <!-- Step 5 -->
                    <div class="flex gap-8 relative">
                         <div class="relative">
                            <div class="bg-green-700 text-white w-10 h-10 flex items-center justify-center rounded-full font-bold z-10 relative">5</div>
                        </div>
                        <div class="flex-1">
                             <img src="https://i.imgur.com/yLrVPMR.jpeg" class="rounded-lg shadow-md mb-4 w-full">
                            <h3 class="text-xl font-bold mb-2">パイプ以外の様々な対象物をAIにカウントさせた</h3>
                            <p class="text-sm text-gray-600">パイプだけでなく、様々な形状や大きさの対象物をAIにカウントさせることに成功しました。これにより、より幅広い用途で活用できるようになりました。</p>
                        </div>
                    </div>
                </div>
             </div>
        </section>
        
        <!-- 7. 選ばれる理由 -->
        <section class="py-24 bg-white">
            <div class="container mx-auto px-6">
                <h2 class="section-heading">なぜCountMate AIが選ばれるのか？</h2>
                <div class="grid md:grid-cols-3 gap-8">
                    <div>
                        <img src="https://i.imgur.com/tRxJ5xd.png" alt="現場でアプリを使う作業員" class="rounded-lg shadow-md mb-4 w-full">
                        <h3 class="text-xl font-bold mb-2">現場で生まれた、現場のためのアプリ</h3>
                        <p class="text-sm text-gray-600">長年、現場で課題とされてきたパイプのカウント作業。その手間と時間を大幅に削減するために生まれたのが、CountMate AIです。</p>
                    </div>
                    <div>
                        <img src="https://i.imgur.com/dqpejhb.jpeg" alt="パイプを持つAIロボット" class="rounded-lg shadow-md mb-4 w-full">
                        <h3 class="text-xl font-bold mb-2">高い精度と信頼性</h3>
                        <p class="text-sm text-gray-600">当社では、人間とAIが協働する独自の学習モデルを採用しています。経験豊富な専門家が、高品質なデータのみをAIに学習させることで、従来のAIモデルを凌駕する精度を実現しました。</p>
                    </div>
                     <div>
                        <img src="https://i.imgur.com/lP5eXvu.jpeg" alt="笑顔でスマホを操作する作業員" class="rounded-lg shadow-md mb-4 w-full">
                        <h3 class="text-xl font-bold mb-2">使いやすい設計</h3>
                        <p class="text-sm text-gray-600">パイプ屋によって作られた当アプリは、使い勝手の良さと直感的なデザインが特徴です。実際の現場での使用経験から得た知見を活かし、信頼性と使いやすさを追求しました。</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- 8. 解決する課題 -->
        <section id="features" class="py-24">
            <div class="container mx-auto px-6">
                 <h2 class="section-heading">CountMate AIが解決する課題</h2>
                 <div class="grid sm:grid-cols-2 lg:grid-cols-4 gap-8">
                    <div class="text-left">
                        <img src="https://i.imgur.com/FGYxAZ3.jpeg" class="rounded-lg shadow-md mb-4 w-full h-48 object-cover">
                        <h3 class="text-xl font-bold mb-2">人手不足</h3>
                        <p class="text-sm text-gray-600">少ない人数で効率的な作業進行が可能になります。AIによる自動カウント機能により、繁忙期の一時的な人員増強の必要性も大幅に低減されます。</p>
                    </div>
                    <div class="text-left">
                        <img src="https://i.imgur.com/ScXGIII.jpeg" class="rounded-lg shadow-md mb-4 w-full h-48 object-cover">
                        <h3 class="text-xl font-bold mb-2">作業負担軽減</h3>
                        <p class="text-sm text-gray-600">心理的な負担が大きいカウント作業から解放され、従業員はより付加価値の高い業務に集中できます。</p>
                    </div>
                    <div class="text-left">
                        <img src="https://i.imgur.com/mcB9v98.jpeg" class="rounded-lg shadow-md mb-4 w-full h-48 object-cover">
                        <h3 class="text-xl font-bold mb-2">ヒューマンエラー削減</h3>
                        <p class="text-sm text-gray-600">人が正確なデータ取得により、在庫管理の精度が飛躍的に向上します。AIによる自動認識システムによってほぼゼロに抑えられます。</p>
                    </div>
                    <div class="text-left">
                        <img src="https://i.imgur.com/f8dHOLp.jpeg" class="rounded-lg shadow-md mb-4 w-full h-48 object-cover">
                        <h3 class="text-xl font-bold mb-2">信頼性の向上</h3>
                        <p class="text-sm text-gray-600">商品の正確な計数により、お客様への納品精度が飛躍的に向上し、信頼性の高いパートナーとして評価され、お客様は安心して貴社製品をご利用いただけるでしょう。</p>
                    </div>
                 </div>
                 <div class="info-box mt-16 max-w-4xl mx-auto">
                    <ion-icon name="checkmark-circle" class="text-2xl flex-shrink-0"></ion-icon>
                    <p>導入企業様の実績では、特に作業時間の削減、人的ミスの削減、作業効率の向上を達成しています。</p>
                </div>
            </div>
        </section>
        
        <!-- 9. 導入効果 -->
        <section id="effects" class="py-24 bg-white">
            <div class="container mx-auto px-6">
                <div class="max-w-4xl mx-auto">
                     <!-- NEW BANNER -->
                    <div class="relative w-full h-48 rounded-lg shadow-lg overflow-hidden mb-12 flex items-center justify-center text-center">
                        <img src="https://i.imgur.com/vk7dtGF.png" alt="右肩上がりの成長を示すグラフ" class="absolute w-full h-full object-cover object-center">
                        <div class="absolute inset-0 bg-black bg-opacity-60"></div>
                        <h2 class="relative z-10 text-4xl font-bold text-white tracking-tight">Countmate AIの導入効果</h2>
                    </div>
                     <p class="mb-8 text-gray-600">CountMate AIの導入により、作業時間を90%程度削減することが可能です。具体的な効果を試算するため、以下の前提条件を設定します。</p>

                     <div class="bg-gray-50 p-6 rounded-lg">
                        <h3 class="text-xl font-bold mb-4">試算条件</h3>
                        <ul class="list-disc list-inside text-gray-700 mb-6">
                            <li>従業員年間コスト500万円、平均カウント本数200本/回、月間カウント回数1、000回。</li>
                        </ul>
                        <h3 class="text-xl font-bold mb-4">試算結果</h3>
                        <div class="overflow-x-auto">
                            <table class="w-full text-left border-collapse">
                                <thead>
                                    <tr class="border-b bg-gray-100">
                                        <th class="p-3 font-bold">項目</th>
                                        <th class="p-3 font-bold">計算式</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr class="border-b"><td class="p-3">現在の作業時間</td><td class="p-3">200秒/回 × 1,000回/月 × 12ヶ月 ÷ 3,600秒 = 666.7時間/年</td></tr>
                                    <tr class="border-b"><td class="p-3">時間削減</td><td class="p-3">666.7時間/年 - 33.3時間/年 = 633.4時間/年</td></tr>
                                    <tr class="border-b"><td class="p-3">CountMate AI導入後</td><td class="p-3">10秒/回 × 1,000回/月 × 12ヶ月 ÷ 3,600秒 = 33.3時間/年</td></tr>
                                    <tr class="border-b"><td class="p-3">削減率</td><td class="p-3">633.4時間/年 ÷ 666.7時間/年 = 95.0%</td></tr>
                                </tbody>
                            </table>
                        </div>
                        <p class="mt-6">従業員の時給（500万円/年で換算）は約2,404円となります。削減された時間を金額に換算すると、<span class="text-highlight">年間約150万円のコスト削減</span>が見込めます。</p>

                        <h3 class="text-xl font-bold mt-8 mb-4">注意点</h3>
                        <p class="text-gray-700 text-sm">上記の試算は概算であり、実際の削減効果は、具体的な作業内容、システム導入状況、従業員のスキルなどによって異なります。</p>
                     </div>
                      <div class="info-box mt-12">
                        <ion-icon name="information-circle" class="text-2xl flex-shrink-0"></ion-icon>
                        <div>
                            <h4 class="font-bold">費用対効果の検討</h4>
                            <p class="text-sm">CountMate AIの導入には、初期費用に加えてシステムの運用コストが発生します。これらのコストと予想される削減効果を慎重に比較検討することが重要です。より精密な試算のために、従業員数や職種別のコスト情報をご提供いただければ幸いです。詳細については、お気軽にお問い合わせください。</p>
                        </div>
                    </div>
                    <!-- Interactive ROI Calculator -->
                    <div id="roi-calculator" class="mt-12 bg-gray-100 p-8 rounded-lg border border-gray-200 shadow-inner">
                        <h3 class="text-2xl font-bold mb-4 text-center text-gray-800">✨ AI導入効果シミュレーション</h3>
                        <p class="text-center text-sm text-gray-600 mb-6">あなたの会社の情報を入力して、パーソナライズされたコスト削減効果をAIに分析してもらいましょう。</p>
                        <form id="roi-form" class="space-y-4 max-w-lg mx-auto">
                            <div>
                                <label for="current-time" class="block text-sm font-medium text-gray-700">現在の1回あたりのカウント時間（秒）</label>
                                <input type="number" id="current-time" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500" placeholder="例: 180" required>
                            </div>
                            <div>
                                <label for="monthly-counts" class="block text-sm font-medium text-gray-700">月間カウント回数</label>
                                <input type="number" id="monthly-counts" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500" placeholder="例: 500" required>
                            </div>
                            <div>
                                <label for="hourly-wage" class="block text-sm font-medium text-gray-700">従業員の平均時給（円）</label>
                                <input type="number" id="hourly-wage" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500" placeholder="例: 2500" required>
                            </div>
                            <button type="submit" class="w-full bg-green-700 text-white font-bold py-3 px-6 rounded-md hover:bg-green-800 transition-colors flex items-center justify-center shadow-md">
                                <ion-icon name="sparkles-outline" class="mr-2"></ion-icon>
                                分析を開始
                            </button>
                        </form>
                        <div id="roi-result-container" class="mt-6 hidden">
                            <h4 class="font-bold text-lg mb-2 text-gray-800">AIによる分析結果:</h4>
                            <div id="roi-result" class="bg-white p-4 rounded-md border text-gray-700 whitespace-pre-wrap"></div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 10. 類似アプリとの違い -->
        <section class="py-24">
            <div class="container mx-auto px-6">
                 <div class="relative w-full h-48 rounded-lg shadow-lg overflow-hidden mb-12 flex items-center justify-center text-center">
                    <img src="https://i.imgur.com/iPBuC6q.jpeg" alt="かわいい子犬たち" class="absolute w-full h-full object-cover object-center">
                    <div class="absolute inset-0 bg-black bg-opacity-60"></div>
                    <h2 class="relative z-10 text-4xl font-bold text-white tracking-tight">類似アプリとの違い</h2>
                </div>
                <div class="grid md:grid-cols-2 gap-8 bg-gray-50 p-8 rounded-lg">
                    <div>
                        <h3 class="text-2xl font-bold mb-4">一般的なカウントアプリ</h3>
                        <ul class="list-disc list-inside space-y-2 text-gray-600">
                           <li>汎用的な設計で現場のニーズに対応できない</li>
                           <li>開発者と現場の理解格差がある</li>
                           <li>カスタマイズが不可能</li>
                           <li>インストールが必要</li>
                           <li>単にAI画像認識のライブラリを使用している</li>
                        </ul>
                    </div>
                     <div>
                        <h3 class="text-2xl font-bold mb-4 text-green-700">CountMate AI</h3>
                        <ul class="list-disc list-inside space-y-2 text-gray-600">
                           <li class="text-highlight">現場発のアプリで現場の視点を活かした設計</li>
                           <li class="text-highlight">直感的な操作性と高い精度の両立</li>
                           <li class="text-highlight">他システムとの連携が可能</li>
                           <li class="text-highlight">インストールが不要</li>
                           <li class="text-highlight">独自エンジン＋人間が介在する強化学習</li>
                        </ul>
                    </div>
                </div>
                <p class="max-w-4xl mx-auto mt-8 text-gray-600">CountMate AIは、他とは一線を画すアプリケーションです。現場での経験や課題を基に開発され、持続的な改善を重ねることで、実務向けの機能と使いやすさを実現しています。以下の様なアカウントが難しい状況でも問題ありません。</p>
                <div class="grid sm:grid-cols-2 lg:grid-cols-4 gap-6 mt-8">
                    <div>
                        <img src="https://i.imgur.com/8S22Kw6.png" class="rounded-lg shadow-md w-full">
                        <p class="text-center mt-2 text-sm text-gray-600">袋入り状態と露出状態が混在している。</p>
                    </div>
                    <div>
                        <img src="https://i.imgur.com/qEp5DAl.png" class="rounded-lg shadow-md w-full">
                        <p class="text-center mt-2 text-sm text-gray-600">束がくずれている</p>
                    </div>
                    <div>
                        <img src="https://i.imgur.com/O8ujlYI.png" class="rounded-lg shadow-md w-full">
                        <p class="text-center mt-2 text-sm text-gray-600">パイプの大きさがバラバラ</p>
                    </div>
                     <div>
                        <img src="https://i.imgur.com/mZ3qc45.png" class="rounded-lg shadow-md w-full">
                        <p class="text-center mt-2 text-sm text-gray-600">極小パイプ</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- 11. 基本操作 -->
        <section id="how-to-use" class="py-24 bg-white">
            <div class="container mx-auto px-6">
                <div class="relative w-full h-48 rounded-lg shadow-lg overflow-hidden mb-12 flex items-center justify-center text-center">
                    <img src="https://i.imgur.com/TjqveGr.jpeg" alt="公園でスマートフォンを操作するイメージ" class="absolute w-full h-full object-cover object-center">
                    <div class="absolute inset-0 bg-black bg-opacity-60"></div>
                    <h2 class="relative z-10 text-4xl font-bold text-white tracking-tight">基本操作</h2>
                </div>
                <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-5 gap-6 text-center">
                    <!-- Step 1-5 -->
                    <div class="step">
                        <p class="font-bold mb-2 text-gray-700">STEP 1</p>
                        <div class="bg-gray-100 p-2 rounded-lg border"><img src="https://i.imgur.com/CJlUX24.jpeg" alt="操作手順1" class="w-full rounded-md"></div>
                        <p class="mt-4 text-sm text-gray-600">アプリを起動し、画面右上のカメラボタン（緑）をクリック。</p>
                    </div>
                    <div class="step">
                        <p class="font-bold mb-2 text-gray-700">STEP 2</p>
                        <div class="bg-gray-100 p-2 rounded-lg border"><img src="https://i.imgur.com/gigLOsx.jpeg" alt="操作手順2" class="w-full rounded-md"></div>
                        <p class="mt-4 text-sm text-gray-600">プルダウンから「背面カメラ」を選択。写真を撮って送信をクリック。</p>
                    </div>
                    <div class="step">
                        <p class="font-bold mb-2 text-gray-700">STEP 3</p>
                        <div class="bg-gray-100 p-2 rounded-lg border"><img src="https://i.imgur.com/S2Pqh24.jpeg" alt="操作手順3" class="w-full rounded-md"></div>
                        <p class="mt-4 text-sm text-gray-600">カウント完了。</p>
                    </div>
                    <div class="step">
                        <p class="font-bold mb-2 text-gray-700">STEP 4</p>
                        <div class="bg-gray-100 p-2 rounded-lg border"><img src="https://i.imgur.com/eodCDmc.jpeg" alt="操作手順4" class="w-full rounded-md"></div>
                        <p class="mt-4 text-sm text-gray-600">範囲指定する場合、指定したい部分の周囲に点を置く。</p>
                    </div>
                    <div class="step">
                        <p class="font-bold mb-2 text-gray-700">STEP 5</p>
                        <div class="bg-gray-100 p-2 rounded-lg border"><img src="https://i.imgur.com/rhaqvXU.jpeg" alt="操作手順5" class="w-full rounded-md"></div>
                        <p class="mt-4 text-sm text-gray-600">カウント完了。</p>
                    </div>
                </div>
                <div class="mt-16">
                    <h3 class="text-center text-2xl font-bold mb-6">操作風景の動画</h3>
                    <div class="max-w-3xl mx-auto youtube-container relative overflow-hidden rounded-lg shadow-lg">
                        <a href="https://youtu.be/XmLNBFZDpJA" target="_blank" rel="noopener noreferrer" class="block">
                            <img src="https://i.imgur.com/UmaB7Ra.jpeg" alt="YouTube Video Thumbnail" class="w-full h-full object-cover">
                            <div class="youtube-play-button">
                                <svg class="w-16 h-16 text-white" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clip-rule="evenodd"></path></svg>
                            </div>
                        </a>
                    </div>
                </div>
            </div>
        </section>

        <!-- 12. システム要件 -->
        <section class="py-24">
             <div class="container mx-auto px-6">
                <div class="relative w-full h-48 rounded-lg shadow-lg overflow-hidden mb-12 flex items-center justify-center text-center">
                    <img src="https://i.imgur.com/2fuVJnx.jpeg" alt="システムのUIイメージ" class="absolute w-full h-full object-cover object-center">
                    <div class="absolute inset-0 bg-black bg-opacity-60"></div>
                    <h2 class="relative z-10 text-4xl font-bold text-white tracking-tight">システム要件</h2>
                </div>
                <p class="text-center max-w-2xl mx-auto mb-12 text-gray-600">CountMate AIをご利用いただくには、下記のシステム要件を満たしている必要があります。</p>
                <div class="grid md:grid-cols-2 gap-6 max-w-4xl mx-auto">
                    <div class="bg-white p-6 rounded-lg shadow-sm">
                        <h3 class="text-xl font-bold mb-3">OS</h3>
                        <ul class="list-disc list-inside text-gray-600 text-sm space-y-1">
                            <li>OS不問。</li>
                            <li>ブラウザが動作すればOK。</li>
                        </ul>
                    </div>
                     <div class="bg-white p-6 rounded-lg shadow-sm">
                        <h3 class="text-xl font-bold mb-3">メモリ</h3>
                        <ul class="list-disc list-inside text-gray-600 text-sm space-y-1">
                            <li>一般的なPC、スマートフォンであれば、問題なく動作します。</li>
                        </ul>
                    </div>
                     <div class="bg-white p-6 rounded-lg shadow-sm">
                        <h3 class="text-xl font-bold mb-3">インターネット接続</h3>
                        <ul class="list-disc list-inside text-gray-600 text-sm space-y-1">
                            <li>AIサーバーとの通信を行うため、インターネット回線接続が必要です。</li>
                        </ul>
                    </div>
                     <div class="bg-white p-6 rounded-lg shadow-sm">
                        <h3 class="text-xl font-bold mb-3">カメラ</h3>
                        <ul class="list-disc list-inside text-gray-600 text-sm space-y-1">
                            <li>スマートフォン内蔵カメラ、WEBカメラ、外付けカメラのいずれかが必要です。</li>
                            <li>パイプの円筒を正確に認識できる解像度が必要です。（400万画素以上を推奨）</li>
                        </ul>
                    </div>
                     <div class="bg-white p-6 rounded-lg shadow-sm">
                        <h3 class="text-xl font-bold mb-3">ブラウザ</h3>
                        <ul class="list-disc list-inside text-gray-600 text-sm space-y-1">
                            <li>インストールされているブラウザは、最新版である必要があります。</li>
                             <li>2024年10月時点では、Safari、Chrome、Edgeの最新版について動作確認済みです。</li>
                        </ul>
                    </div>
                     <div class="bg-white p-6 rounded-lg shadow-sm">
                        <h3 class="text-xl font-bold mb-3">その他</h3>
                        <ul class="list-disc list-inside text-gray-600 text-sm space-y-1">
                            <li>本アプリケーションはWEBアプリケーションの為、端末へのインストールは不要です。</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- 13. 人間とAIのコンビネーション -->
        <section class="py-24 bg-white">
            <div class="container mx-auto px-6">
                 <div class="relative w-full h-48 rounded-lg shadow-lg overflow-hidden mb-12 flex items-center justify-center text-center">
                    <img src="https://i.imgur.com/IQDfelL.jpeg" alt="AIとロボットのイメージ" class="absolute w-full h-full object-cover object-center">
                    <div class="absolute inset-0 bg-black bg-opacity-60"></div>
                    <h2 class="relative z-10 text-4xl font-bold text-white tracking-tight">答えは人間とAIのコンビネーションにあり</h2>
                </div>
                <div class="grid md:grid-cols-2 gap-12 max-w-5xl mx-auto mb-16">
                    <div>
                        <h3 class="text-2xl font-bold mb-4 text-center">人間が得意な事</h3>
                        <img src="https://i.imgur.com/9nwsODE.jpeg" class="rounded-lg mb-4 w-full">
                        <ul class="list-disc list-inside text-sm text-gray-600 space-y-2">
                            <li><strong>文脈理解:</strong> 周囲の環境や他の物体との関係性など、画像全体から得られる文脈情報を総合的に判断できます</li>
                            <li><strong>識別力:</strong> 長年の経験を通じて、様々な形状や配置のパイプを効率的に識別することができます</li>
                            <li><strong>推論能力:</strong> 部分的にしか見えないパイプの補完や、状況に応じた柔軟な判断が可能です</li>
                        </ul>
                    </div>
                     <div>
                        <h3 class="text-2xl font-bold mb-4 text-center">AIが得意な事</h3>
                        <img src="https://i.imgur.com/ls1ELUd.jpeg" class="rounded-lg mb-4 w-full">
                        <ul class="list-disc list-inside text-sm text-gray-600 space-y-2">
                           <li><strong>大量のデータ処理能力:</strong> 大量のデータを短時間で処理し、パターンを認識できます</li>
                           <li><strong>客観的な判断:</strong> 感情や主観に左右されず、データに基づいた判断を行います</li>
                           <li><strong>疲れない:</strong> 休憩なしで常に稼働する事ができます</li>
                           <li><strong>一貫性:</strong> 同じ条件下では、常に同じ結果を出力し、再現性が高いです</li>
                        </ul>
                    </div>
                </div>
                <div class="text-center">
                    <h3 class="text-2xl font-bold mb-4">AIと人間のコンビネーション</h3>
                     <div class="aspect-w-4 aspect-h-3 max-w-4xl mx-auto mb-8 rounded-lg shadow-md overflow-hidden">
                        <img src="https://i.imgur.com/ED1qqhZ.jpeg" alt="AIと人間が協働しているイメージ" class="w-full h-full object-cover">
                     </div>
                     <p class="max-w-3xl mx-auto text-gray-600 mb-12">AIと人間がそれぞれの強みを活かすことで、より効率的かつ正確なパイプカウントが可能になります。</p>
                     <div class="grid md:grid-cols-3 gap-8 max-w-5xl mx-auto">
                        <div class="bg-gray-50 p-6 rounded-lg">
                            <h4 class="font-bold text-lg mb-2">高速かつ大量の処理</h4>
                            <p class="text-sm text-gray-600">AIが得意とする大量の画像データの高速処理により、短時間で多くのパイプをカウントできます。</p>
                        </div>
                        <div class="bg-gray-50 p-6 rounded-lg">
                            <h4 class="font-bold text-lg mb-2">一貫性のある結果</h4>
                            <p class="text-sm text-gray-600">人間の主観が入り込むことなく、一定の基準でカウントすることで、結果の一貫性を保てます。</p>
                        </div>
                        <div class="bg-gray-50 p-6 rounded-lg">
                            <h4 class="font-bold text-lg mb-2">人間の補完</h4>
                            <p class="text-sm text-gray-600">AIが数え損ねたり、誤って数えすぎたりした部分を、人間が持つ文脈理解力や推論能力で補完することで、より正確なカウント結果を得られます。</p>
                        </div>
                     </div>
                </div>
            </div>
        </section>
        
        <!-- 14. 設計者の想い -->
        <section class="py-24">
            <div class="container mx-auto px-6">
                <div class="relative w-full h-48 rounded-lg shadow-lg overflow-hidden mb-12 flex items-center justify-center text-center">
                    <img src="https://i.imgur.com/vrSj6jQ.png" alt="オフィス風景" class="absolute w-full h-full object-cover object-center">
                    <div class="absolute inset-0 bg-black bg-opacity-60"></div>
                    <h2 class="relative z-10 text-4xl font-bold text-white tracking-tight">設計者の想い</h2>
                </div>
                <p class="text-center max-w-2xl mx-auto mb-12 text-gray-600">CountMate AIの設計者である山本特殊鋼株式会社の山本正浩取締役にお話しを伺いました。</p>
                <div class="grid md:grid-cols-2 gap-8 items-start">
                    <div class="aspect-w-16 aspect-h-9 rounded-lg shadow-lg overflow-hidden">
                        <iframe class="w-full h-full" src="https://www.youtube.com/embed/AFj_lqNixN8?rel=0" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
                    </div>
                    <div>
                        <h3 class="text-xl font-bold mb-4">鉄鋼新聞の記事</h3>
                        <img src="https://i.imgur.com/Ec9oe4T.png" alt="鉄鋼新聞の記事" class="w-full rounded-lg border-2 p-2">
                    </div>
                </div>
            </div>
        </section>

        <!-- 16. 費用 -->
        <section id="pricing" class="py-24 bg-white">
             <div class="container mx-auto px-6">
                <div class="relative w-full h-48 rounded-lg shadow-lg overflow-hidden mb-12 flex items-center justify-center text-center">
                    <img src="https://i.imgur.com/ZkfP7Vv.jpeg" alt="費用セクションの背景画像" class="absolute w-full h-full object-cover object-center">
                    <div class="absolute inset-0 bg-black bg-opacity-60"></div>
                    <h2 class="relative z-10 text-4xl font-bold text-white tracking-tight">費用</h2>
                </div>
                <div class="w-full max-w-4xl mx-auto">
                    <!-- 初期費用テーブル -->
                    <h3 class="text-2xl font-bold mb-4">初期費用</h3>
                    <div class="overflow-x-auto bg-gray-50 p-4 rounded-lg">
                        <table class="w-full text-sm">
                            <thead class="text-left"><tr><th class="p-3">項目</th><th class="p-3">金額（円）</th><th class="p-3">備考</th></tr></thead>
                            <tbody class="divide-y">
                                <tr class="bg-white"><td class="p-3">アプリケーション</td><td class="p-3">5,000,000</td><td class="p-3"></td></tr>
                                <tr><td class="p-3">拠点追加（サーバ追加なし）</td><td class="p-3">750,000</td><td class="p-3">拠点は住所単位</td></tr>
                                <tr class="bg-white"><td class="p-3">拠点追加（サーバ追加あり）</td><td class="p-3">1,500,000</td><td class="p-3">〃</td></tr>
                                <tr><td class="p-3">AIモデルの追加</td><td class="p-3">1,500,000</td><td class="p-3">カウント対象を追加する場合</td></tr>
                                <tr class="bg-white"><td class="p-3">その他の要件</td><td class="p-3">別途お見積り</td><td class="p-3">貴社に合わせたカスタマイズ</td></tr>
                                <tr><td class="p-3">追加10アカウント毎</td><td class="p-3">5,000</td><td class="p-3">当初10アカウント分は無料</td></tr>
                            </tbody>
                        </table>
                    </div>
                    <!-- 月額費用テーブル -->
                    <h3 class="text-2xl font-bold mt-8 mb-4">月額費用</h3>
                     <div class="overflow-x-auto bg-gray-50 p-4 rounded-lg">
                        <table class="w-full text-sm">
                             <thead class="text-left"><tr><th class="p-3">項目</th><th class="p-3">金額（円）</th><th class="p-3">備考</th></tr></thead>
                            <tbody class="divide-y">
                                <tr class="bg-white"><td class="p-3">月額サーバ費用</td><td class="p-3">45,000</td><td class="p-3">サーバ費用</td></tr>
                                <tr><td class="p-3">月額リモート保守費用</td><td class="p-3">55,000</td><td class="p-3">月間作業時間・・・8時間まで<br>月間インシデント・・・3件まで</td></tr>
                                <tr class="bg-white"><td class="p-3">拠点追加（サーバ追加なし）</td><td class="p-3">40,000</td><td class="p-3"></td></tr>
                                <tr><td class="p-3">拠点追加（サーバ追加あり）</td><td class="p-3">75,000</td><td class="p-3"></td></tr>
                            </tbody>
                        </table>
                    </div>
                    <p class="text-sm mt-6 text-gray-600">詳細な料金については、担当営業にお問い合わせください。</p>
                </div>
            </div>
        </section>

        <!-- 15. お問い合わせ -->
        <section id="contact" class="py-24">
            <div class="container mx-auto px-6">
                 <div class="relative w-full h-48 rounded-lg shadow-lg overflow-hidden mb-12 flex items-center justify-center text-center">
                    <img src="https://i.imgur.com/5azq2ZF.png" alt="お問い合わせセクションの背景画像" class="absolute w-full h-full object-cover object-center">
                    <div class="absolute inset-0 bg-black bg-opacity-60"></div>
                    <h2 class="relative z-10 text-4xl font-bold text-white tracking-tight">お問い合わせはこちら</h2>
                </div>
                <div class="flex justify-center">
                    <iframe src="https://docs.google.com/forms/d/e/1FAIpQLSdcswb7nId-qlnOlpoUoi_vXHKQXRD5CyxmvT-VatczlijO9Q/viewform?embedded=true" width="640" height="1487" frameborder="0" marginheight="0" marginwidth="0">読み込んでいます…</iframe>
                </div>
            </div>
        </section>

    </main>
    
    <!-- AI Chatbot Section -->
    <div id="ai-chat">
        <!-- Floating Chat Button -->
        <button id="chat-bubble-button" class="fixed bottom-8 right-8 bg-green-700 text-white p-4 rounded-full shadow-lg z-50 hover:bg-green-800 transition-transform transform hover:scale-110">
            <ion-icon name="chatbubbles-outline" class="text-3xl"></ion-icon>
        </button>

        <!-- Chat Container -->
        <div id="chat-container" class="fixed bottom-24 right-8 w-full max-w-sm h-3/4 max-h-[600px] bg-white rounded-lg shadow-2xl z-50 flex flex-col opacity-0 transform translate-y-4 pointer-events-none">
            <!-- Header -->
            <div class="flex justify-between items-center p-4 bg-gray-100 border-b rounded-t-lg">
                <h3 class="font-bold text-lg text-gray-800">CountMate AI アシスタント</h3>
                <button id="close-chat-button" class="text-gray-500 hover:text-gray-800">
                    <ion-icon name="close-outline" class="text-2xl"></ion-icon>
                </button>
            </div>
            <!-- Messages -->
            <div id="chat-messages" class="flex-1 p-4 overflow-y-auto space-y-4">
                 <div class="flex justify-start">
                    <div class="chat-bubble-ai p-3 rounded-lg max-w-xs">
                        CountMate AIについて、ご不明な点はありますか？
                    </div>
                </div>
            </div>
            <!-- Input -->
            <div class="p-4 bg-gray-100 border-t rounded-b-lg">
                <form id="chat-form" class="flex items-center gap-2">
                    <input type="text" id="chat-input" placeholder="質問を入力してください..." class="w-full px-4 py-2 border rounded-full focus:outline-none focus:ring-2 focus:ring-green-600">
                    <button type="submit" class="bg-green-700 text-white p-3 rounded-full hover:bg-green-800 transition">
                        <ion-icon name="send" class="text-xl"></ion-icon>
                    </button>
                </form>
            </div>
        </div>
    </div>


    <!-- フッター -->
    <footer class="bg-gray-800 text-white">
        <div class="container mx-auto px-6 py-8 text-center text-sm text-gray-400">
            <p>&copy; 2025 CountMate AI. All Rights Reserved.</p>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const chatBubbleButton = document.getElementById('chat-bubble-button');
            const chatContainer = document.getElementById('chat-container');
            const closeChatButton = document.getElementById('close-chat-button');
            const chatForm = document.getElementById('chat-form');
            const chatInput = document.getElementById('chat-input');
            const chatMessages = document.getElementById('chat-messages');

            // --- Chatbot visibility ---
            const toggleChat = (isOpen) => {
                if (isOpen) {
                    chatContainer.classList.remove('opacity-0', 'translate-y-4', 'pointer-events-none');
                } else {
                    chatContainer.classList.add('opacity-0', 'translate-y-4', 'pointer-events-none');
                }
            };

            chatBubbleButton.addEventListener('click', () => toggleChat(true));
            closeChatButton.addEventListener('click', () => toggleChat(false));

            // --- Handle message submission ---
            chatForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                const userInput = chatInput.value.trim();
                if (!userInput) return;

                appendMessage(userInput, 'user');
                chatInput.value = '';
                showTypingIndicator();

                try {
                    const aiResponse = await callGeminiAPI(userInput);
                    removeTypingIndicator();
                    appendMessage(aiResponse, 'ai');
                } catch (error) {
                    removeTypingIndicator();
                    console.error("Error calling Gemini API:", error);
                    appendMessage('申し訳ありません、エラーが発生しました。もう一度お試しください。', 'ai');
                }
            });

            // --- Helper functions for UI ---
            const appendMessage = (text, sender) => {
                const messageWrapper = document.createElement('div');
                const messageBubble = document.createElement('div');
                
                messageWrapper.className = `flex ${sender === 'user' ? 'justify-end' : 'justify-start'}`;
                messageBubble.className = `p-3 rounded-lg max-w-xs ${sender === 'user' ? 'chat-bubble-user' : 'chat-bubble-ai'}`;
                messageBubble.textContent = text;
                
                messageWrapper.appendChild(messageBubble);
                chatMessages.appendChild(messageWrapper);
                chatMessages.scrollTop = chatMessages.scrollHeight; // Scroll to bottom
            };
            
            const showTypingIndicator = () => {
                const typingIndicator = document.createElement('div');
                typingIndicator.id = 'typing-indicator';
                typingIndicator.className = 'flex justify-start';
                typingIndicator.innerHTML = `
                    <div class="chat-bubble-ai p-3 rounded-lg">
                        <div class="typing-indicator">
                            <span></span><span></span><span></span>
                        </div>
                    </div>
                `;
                chatMessages.appendChild(typingIndicator);
                chatMessages.scrollTop = chatMessages.scrollHeight;
            };

            const removeTypingIndicator = () => {
                const typingIndicator = document.getElementById('typing-indicator');
                if (typingIndicator) {
                    typingIndicator.remove();
                }
            };

            // --- Gemini API Call ---
            const callGeminiAPI = async (userInput) => {
                const apiKey = ""; // The environment will provide the API key.
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;

                // Extract text content from the page to use as context for the AI.
                // This helps the AI answer questions specifically about the product.
                const pageContent = document.body.innerText;
                
                const systemPrompt = `あなたは「CountMate AI」という製品に関する質問に答える、親切なAIアシスタントです。提供されたウェブサイトのコンテキスト情報に基づいて、ユーザーの質問に日本語で回答してください。CountMate AIは、写真から円形パイプの数を自動的にカウントするWEBアプリケーションで、手作業のカウント作業を効率化し、ミスをなくします。もし質問がCountMate AIと無関係な場合は、その質問には答えられないと丁寧に伝えてください。\n\nウェブサイトのコンテキスト:\n${pageContent.substring(0, 4000)}`;

                const payload = {
                    contents: [{
                        parts: [{ text: userInput }]
                    }],
                    systemInstruction: {
                        parts: [{ text: systemPrompt }]
                    },
                };

                let response;
                let delay = 1000; // Start with 1s delay for retries
                for (let i = 0; i < 5; i++) { // Retry up to 5 times
                    try {
                        response = await fetch(apiUrl, {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify(payload)
                        });

                        if (response.ok) {
                            break; // If response is successful, exit the loop
                        }
                        
                        // If throttled, wait and retry
                        if (response.status === 429) {
                            await new Promise(resolve => setTimeout(resolve, delay));
                            delay *= 2; // Exponential backoff
                        } else {
                            // For other errors, don't retry immediately
                            throw new Error(`API request failed with status ${response.status}`);
                        }

                    } catch (error) {
                        if (i === 4) throw error; // If it's the last retry, throw the error
                        await new Promise(resolve => setTimeout(resolve, delay));
                        delay *= 2;
                    }
                }

                if (!response || !response.ok) {
                    console.error("API request failed after retries.", response);
                    return "申し訳ありません、現在サーバーに接続できません。";
                }

                const result = await response.json();
                const candidate = result.candidates?.[0];

                if (candidate && candidate.content?.parts?.[0]?.text) {
                    return candidate.content.parts[0].text;
                } else {
                    console.error("Invalid response structure from API:", result);
                    return "申し訳ありません、予期せぬ応答がありました。";
                }
            };

            // --- ROI Calculator Logic ---
            const roiForm = document.getElementById('roi-form');
            const roiResultContainer = document.getElementById('roi-result-container');
            const roiResult = document.getElementById('roi-result');

            roiForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                const currentTime = document.getElementById('current-time').value;
                const monthlyCounts = document.getElementById('monthly-counts').value;
                const hourlyWage = document.getElementById('hourly-wage').value;

                if (!currentTime || !monthlyCounts || !hourlyWage) {
                    // Using a custom modal instead of alert
                    roiResultContainer.classList.remove('hidden');
                    roiResult.textContent = 'すべての項目を入力してください。';
                    roiResult.style.color = 'red';
                    return;
                }
                roiResult.style.color = 'inherit'; // Reset color

                roiResultContainer.classList.remove('hidden');
                roiResult.innerHTML = `
                    <div class="flex items-center justify-center p-4">
                        <div class="typing-indicator">
                            <span></span><span></span><span></span>
                        </div>
                        <span class="ml-3 text-gray-500">AIが分析中です...</span>
                    </div>
                `;

                try {
                    const analysis = await callGeminiForAnalysis(currentTime, monthlyCounts, hourlyWage);
                    // Using innerHTML to properly render line breaks from the API response
                    roiResult.innerHTML = analysis.replace(/\n/g, '<br>');
                } catch (error) {
                    console.error("Error calling Gemini for ROI analysis:", error);
                    roiResult.textContent = '申し訳ありません、分析中にエラーが発生しました。';
                }
            });


            // --- New Gemini API Call for ROI Analysis ---
            const callGeminiForAnalysis = async (currentTime, monthlyCounts, hourlyWage) => {
                const apiKey = ""; // Provided by the environment
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;

                const systemPrompt = `あなたは、企業のコスト削減を分析する優秀な経営コンサルタントです。「CountMate AI」という製品の導入効果について、提供されたデータに基づいて詳細な分析レポートを作成してください。CountMate AIは、1回のカウント作業を平均10秒に短縮できるものとします。

出力形式:
1. **年間作業時間の比較:** 手作業の場合とCountMate AI導入後の年間作業時間を計算し、比較してください。
2. **年間コスト削減額:** 削減された作業時間を、指定された時給で金額に換算してください。
3. **生産性向上への影響:** 削減された時間をどのように他の価値ある業務に再配分できるか、具体的な提案を2-3点挙げてください。
4. **総括:** 全体をまとめた短いコメントを提供してください。

分析は、プロフェッショナルかつ説得力のあるトーンで、日本語で記述してください。各項目は見出しを付けて分かりやすくまとめてください。`;

                const userInput = `
                    - 現在の1回あたりのカウント時間: ${currentTime}秒
                    - 月間カウント回数: ${monthlyCounts}回
                    - 従業員の平均時給: ${hourlyWage}円
                `;

                const payload = {
                    contents: [{ parts: [{ text: userInput }] }],
                    systemInstruction: { parts: [{ text: systemPrompt }] },
                };

                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                if (!response.ok) {
                    throw new Error(`API request failed with status ${response.status}`);
                }

                const result = await response.json();
                const candidate = result.candidates?.[0];

                if (candidate && candidate.content?.parts?.[0]?.text) {
                    return candidate.content.parts[0].text;
                } else {
                    console.error("Invalid response structure from analysis API:", result);
                    return "申し訳ありません、分析結果の取得に失敗しました。";
                }
            };

        });
    </script>
</body>
</html>

